# Epic 4: UI 컴포넌트화 및 DOM 분리

## Epic Goal
레거시 코드의 복잡한 DOM 조작을 React-ready 컴포넌트 구조로 변환하여 유지보수성과 재사용성 향상

## Epic Description

### 현재 문제점
- 거대한 HTML 문자열 생성과 innerHTML 직접 조작
- 비즈니스 로직과 UI 로직의 강결합
- 중복된 DOM 조작 코드
- 컴포넌트 재사용 불가능한 구조

### 목표
- components/ 디렉토리에 독립적인 컴포넌트 생성
- 비즈니스 로직과 UI 로직 완전 분리
- React 전환 시 최소한의 변경으로 마이그레이션 가능
- 템플릿 기반 렌더링 시스템 구축

### 비즈니스 가치
- UI 변경 시 비즈니스 로직 영향 없음
- 컴포넌트 재사용으로 개발 효율성 향상
- A/B 테스트 등 UI 실험 용이성
- 디자인 시스템 구축 기반 마련

## User Stories

### Story 4.1: 상품 선택 컴포넌트
**As a** 사용자  
**I want** 직관적인 상품 선택 드롭다운  
**So that** 원하는 상품을 쉽게 찾고 장바구니에 추가할 수 있다

**Acceptance Criteria:**
- [ ] ProductSelector 컴포넌트 생성
- [ ] render(products, stock) 메서드
- [ ] 할인 아이콘 표시 (⚡, 💝)
- [ ] 재고 상태별 스타일링 적용
- [ ] 이벤트 핸들러 분리 (onProductSelect)
- [ ] 기존 UI와 100% 동일한 ??
- 템플릿 기반 렌더링 시스템 구축

### 비즈니스 가치
- UI 변경 시 비즈니스 로직 영향 없음
- 컴포넌트 재사용으로 개발 효율성 향상
- A/B 테스트 등 UI 실험 용이성
- 디자인 시스템 구축 기반 마련

##lay 컴포넌트 생성
- [ ] CartItem 서브컴포넌트 분리
- [ ] render(cartItems, discounts) 메서드
- [ ] 수량 변경 버튼 (+/-) 기능
- [ ] 제거 버튼 기능
- [ ] 할인 표시 및 취소선 스타일

### Story 4.3: 주문 요약 컴포넌트
**As a** 사용자  
**I want** 최종 주문 금액과 할인 내역이 명확한 요약  
**So that** 결제 전 모든 정보를 확인할 수 있다

**Acceptance Criteria:**
- [ ] OrderSummary 컴포넌트 생성
- [ ] 소계, 할인, 최종 금액 표시
- [ ] 포인트 적립 예정 내역 표시
- [ ] 화요일 특별 할인 배너
- [ ] "Proceed to Checkout" 버튼
- [ ] 적용된 할인 정책 상세 표시

### Story 4.4: 도움말 모달 컴포넌트
**As a** 사용자  
**I want** 할인 정책과 포인트 적립 안내를 확인할 수 있는 도움말  
**So that** 쇼핑 정책을 이해하고 최적의 구매 결정을 할 수 있다

**Acceptance Criteria:**
- [ ] HelpModal 컴포넌트 생성
- [ ] 슬라이드 애니메이션 구현
- [ ] 할인 정책 안내 콘텐츠
- [ ] 포인트 적립 안내 콘텐츠
- [ ] 배경 클릭/X버튼으로 닫기
- [ ] 접근성 고려 (키보드 네비게이션)

### Story 4.5: 재고 정보 및 알림 컴포넌트
**As a** 시스템  
**I want** 재고 상태와 알림을 일관되게 표시하는 컴포넌트  
**So that** 사용자에게 정확한 정보를 제공할 수 있다

**Acceptance Criteria:**
- [ ] StockInfo 컴포넌트 생성
- [ ] NotificationBar 컴포넌트 생성
- [ ] 재고 부족/품절 상태 표시
- [ ] 번개세일/추천할인 알림
- [ ] 재고 초과 경고 메시지
- [ ] 알림 자동 닫기 기능

## Definition of Done
- [ ] 모든 UI가 컴포넌트로 분리
- [ ] components/ 디렉토리 구조 완성
- [ ] 컴포넌트별 독립적인 렌더링 가능
- [ ] 674개 기존 테스트 모두 통과
- [ ] UI 동작 100% 기존과 일치

## Dependencies
- Epic 3 완료 (비즈니스 로직 분리)
- templates/ 디렉토리 생성

## Risks & Mitigation
- **위험**: 컴포넌트 분리 과정에서 UI 동작 변화
- **완화**: 시각적 회귀 테스트 도구 활용

## Success Metrics
- 컴포넌트 분리율: 100%
- DOM 직접 조작 제거율: 95% 이상
- UI 테스트 커버리지: 90% 이상
- 컴포넌트 재사용성: 80% 이상
